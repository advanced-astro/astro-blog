(()=>{let e=document.currentScript.getAttribute("data-api")||"https://lb1.beamanalytics.io/api/log";window.beam=t=>{if(!(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(location.hostname)||"file:"===location.protocol||window.__nightmare||window.navigator.webdriver||window.Cypress)){let a={},n=navigator.languages?.length?navigator.languages[0]:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en",o=Object.fromEntries(new URLSearchParams(window.location.search).entries()),i="";0>document.referrer.indexOf(location.origin)&&(i=document.referrer);let r=window.beam_token||document.currentScript.getAttribute("data-token");if(window.beam_token=window.beam_token||r,r){a.width=window.innerWidth,a.hostname=location.hostname,a.pathname=t||location.pathname,a.referrer=i,a.user_agent=window.navigator.userAgent,a.locale=n,a.params=o,a.token=r,a.title=document.title,a.hash=location.hash;let s=new XMLHttpRequest;s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(a))}}};let t=()=>{beam()},a=window.history;if(a.pushState){let e=a.pushState;a.pushState=function(){e.apply(this,arguments),beam()},window.addEventListener("popstate",t)}beam()})()
